description: "User can transform into a Smilodon or Smilodon-human hybrid."
  },
  "Inu Inu no Mi, Model: Kyubi no Kitsune": {
    id: "inu_inu_no_mi_kyubi",
    name: "Inu Inu no Mi, Model: Kyubi no Kitsune",
    type: "Mythical Zoan",
    rarity: "uncommon",
    user: "Catarina Devon",
    power: "Transforms the user into a nine-tailed fox",
    description: "User can transform into a nine-tailed fox or nine-tailed fox-human hybrid."
  },
  "Sara Sara no Mi, Model: Axolotl": {
    id: "sara_sara_no_mi_axolotl",
    name: "Sara Sara no Mi, Model: Axolotl",
    type: "Zoan",
    rarity: "uncommon",
    user: "Smiley",
    power: "Transforms the user into an axolotl",
    description: "User can transform into an axolotl or axolotl-human hybrid."
  },

  // =====================================================
  // RARE FRUITS (35 fruits)
  // =====================================================
  "Mera Mera no Mi": {
    id: "mera_mera_no_mi",
    name: "Mera Mera no Mi",
    type: "Logia",
    rarity: "rare",
    user: "Portgas D. Ace",
    power: "Allows the user to create and control fire",
    description: "User becomes fire itself and can create, control, and become fire."
  },
  "Hie Hie no Mi": {
    id: "hie_hie_no_mi",
    name: "Hie Hie no Mi",
    type: "Logia",
    rarity: "rare",
    user: "Kuzan",
    power: "Allows the user to create and control ice",
    description: "User becomes ice itself and can create, control, and become ice."
  },
  "Suna Suna no Mi": {
    id: "suna_suna_no_mi",
    name: "Suna Suna no Mi",
    type: "Logia",
    rarity: "rare",
    user: "Crocodile",
    power: "Allows the user to create and control sand",
    description: "User becomes sand itself and can create, control, and become sand."
  },
  "Moku Moku no Mi": {
    id: "moku_moku_no_mi",
    name: "Moku Moku no Mi",
    type: "Logia",
    rarity: "rare",
    user: "Smoker",
    power: "Allows the user to create and control smoke",
    description: "User becomes smoke itself and can create, control, and become smoke."
  },
  "Goro Goro no Mi": {
    id: "goro_goro_no_mi",
    name: "Goro Goro no Mi",
    type: "Logia",
    rarity: "rare",
    user: "Enel",
    power: "Allows the user to create and control lightning",
    description: "User becomes lightning itself and can create, control, and become lightning."
  },
  "Numa Numa no Mi": {
    id: "numa_numa_no_mi",
    name: "Numa Numa no Mi",
    type: "Logia",
    rarity: "rare",
    user: "Caribou",
    power: "Allows the user to create and control swamps",
    description: "User becomes a swamp and can create, control, and become swamp material."
  },
  "Gasu Gasu no Mi": {
    id: "gasu_gasu_no_mi",
    name: "Gasu Gasu no Mi",
    type: "Logia",
    rarity: "rare",
    user: "Caesar Clown",
    power: "Allows the user to create and control gas",
    description: "User becomes gas itself and can create, control, and become various gases."
  },
  "Yuki Yuki no Mi": {
    id: "yuki_yuki_no_mi",
    name: "Yuki Yuki no Mi",
    type: "Logia",
    rarity: "rare",
    user: "Monet",
    power: "Allows the user to create and control snow",
    description: "User becomes snow itself and can create, control, and become snow."
  },
  "Beta Beta no Mi": {
    id: "beta_beta_no_mi",
    name: "Beta Beta no Mi",
    type: "Special Paramecia",
    rarity: "rare",
    user: "Trebol",
    power: "Allows the user to create and control sticky liquid",
    description: "User can create and control sticky substances like mucus."
  },
  "Noro Noro no Mi": {
    id: "noro_noro_no_mi",
    name: "Noro Noro no Mi",
    type: "Paramecia",
    rarity: "rare",
    user: "Foxy",
    power: "Allows the user to slow down anything",
    description: "User can emit photons that slow down anything they hit for 30 seconds."
  },
  "Doku Doku no Mi": {
    id: "doku_doku_no_mi",
    name: "Doku Doku no Mi",
    type: "Paramecia",
    rarity: "rare",
    user: "Magellan",
    power: "Allows the user to create and control poison",
    description: "User can create various types of poison and is immune to all toxins."
  },
  "Hobi Hobi no Mi": {
    id: "hobi_hobi_no_mi",
    name: "Hobi Hobi no Mi",
    type: "Paramecia",
    rarity: "rare",
    user: "Sugar",
    power: "Allows the user to turn people into toys",
    description: "User can turn people into toys and erase memories of their existence."
  },
  "Bari Bari no Mi": {
    id: "bari_bari_no_mi",
    name: "Bari Bari no Mi",
    type: "Paramecia",
    rarity: "rare",
    user: "Bartolomeo",
    power: "Allows the user to create barriers",
    description: "User can create invisible barriers that are virtually indestructible."
  },
  "Nui Nui no Mi": {
    id: "nui_nui_no_mi",
    name: "Nui Nui no Mi",
    type: "Paramecia",
    rarity: "rare",
    user: "Leo",
    power: "Allows the user to stitch things together",
    description: "User can stitch anything together, including people to surfaces."
  },
  "Gura Gura no Mi": {
    id: "gura_gura_no_mi",
    name: "Gura Gura no Mi",
    type: "Paramecia",
    rarity: "rare",
    user: "Edward Newgate",
    power: "Allows the user to create earthquakes",
    description: "User can create vibrations and earthquakes that can destroy the world."
  },
  "Yami Yami no Mi": {
    id: "yami_yami_no_mi",
    name: "Yami Yami no Mi",
    type: "Logia",
    rarity: "rare",
    user: "Marshall D. Teach",
    power: "Allows the user to create and control darkness",
    description: "User becomes darkness itself and can nullify other Devil Fruit powers."
  },
  "Kira Kira no Mi": {
    id: "kira_kira_no_mi",
    name: "Kira Kira no Mi",
    type: "Paramecia",
    rarity: "rare",
    user: "Jozu",
    power: "Allows the user to turn into diamond",
    description: "User can transform their body into diamond, the hardest substance."
  },
  "Ito Ito no Mi": {
    id: "ito_ito_no_mi",
    name: "Ito Ito no Mi",
    type: "Paramecia",
    rarity: "rare",
    user: "Donquixote Doflamingo",
    power: "Allows the user to create and control strings",
    description: "User can create and control razor-sharp strings from their body."
  },
  "Zushi Zushi no Mi": {
    id: "zushi_zushi_no_mi",
    name: "Zushi Zushi no Mi",
    type: "Paramecia",
    rarity: "rare",
    user: "Fujitora",
    power: "Allows the user to control gravity",
    description: "User can manipulate gravitational forces and summon meteorites."
  },

  // =====================================================
  // EPIC FRUITS (25 fruits)
  // =====================================================
  "Pika Pika no Mi": {
    id: "pika_pika_no_mi",
    name: "Pika Pika no Mi",
    type: "Logia",
    rarity: "epic",
    user: "Borsalino",
    power: "Allows the user to create and control light",
    description: "User becomes light itself and can move at the speed of light."
  },
  "Magu Magu no Mi": {
    id: "magu_magu_no_mi",
    name: "Magu Magu no Mi",
    type: "Logia",
    rarity: "epic",
    user: "Sakazuki",
    power: "Allows the user to create and control magma",
    description: "User becomes magma itself and can create, control, and become magma."
  },
  "Ope Ope no Mi": {
    id: "ope_ope_no_mi",
    name: "Ope Ope no Mi",
    type: "Paramecia",
    rarity: "epic",
    user: "Trafalgar D. Water Law",
    power: "Grants surgical powers within a Room",
    description: "User can create a spherical space where they can manipulate anything."
  },
  "Mochi Mochi no Mi": {
    id: "mochi_mochi_no_mi",
    name: "Mochi Mochi no Mi",
    type: "Special Paramecia",
    rarity: "epic",
    user: "Charlotte Katakuri",
    power: "Allows the user to create and control mochi",
    description: "User can create, control, and transform into mochi like a Logia."
  },
  "Memo Memo no Mi": {
    id: "memo_memo_no_mi",
    name: "Memo Memo no Mi",
    type: "Paramecia",
    rarity: "epic",
    user: "Charlotte Pudding",
    power: "Allows the user to manipulate memories",
    description: "User can extract, edit, and manipulate memories like film strips."
  },
  "Bisu Bisu no Mi": {
    id: "bisu_bisu_no_mi",
    name: "Bisu Bisu no Mi",
    type: "Paramecia",
    rarity: "epic",
    user: "Charlotte Cracker",
    power: "Allows the user to create and control biscuits",
    description: "User can create infinite hardened biscuit soldiers and structures."
  },
  "Pero Pero no Mi": {
    id: "pero_pero_no_mi",
    name: "Pero Pero no Mi",
    type: "Paramecia",
    rarity: "epic",
    user: "Charlotte Perospero",
    power: "Allows the user to create and control candy",
    description: "User can create and manipulate candy, including hardened candy structures."
  },
  "Soru Soru no Mi": {
    id: "soru_soru_no_mi",
    name: "Soru Soru no Mi",
    type: "Paramecia",
    rarity: "epic",
    user: "Charlotte Linlin",
    power: "Allows the user to manipulate souls",
    description: "User can extract souls from living beings and put them into objects."
  },
  "Mira Mira no Mi": {
    id: "mira_mira_no_mi",
    name: "Mira Mira no Mi",
    type: "Paramecia",
    rarity: "epic",
    user: "Charlotte Brulee",
    power: "Allows the user to create and travel through mirrors",
    description: "User can create mirrors and travel through the Mirror World."
  },
  "Hoya Hoya no Mi": {
    id: "hoya_hoya_no_mi",
    name: "Hoya Hoya no Mi",
    type: "Paramecia",
    rarity: "epic",
    user: "Charlotte Daifuku",
    power: "Allows the user to summon a genie",
    description: "User can summon a powerful genie from their body by rubbing it."
  },
  "Netsu Netsu no Mi": {
    id: "netsu_netsu_no_mi",
    name: "Netsu Netsu no Mi",
    type: "Paramecia",
    rarity: "epic",
    user: "Charlotte Oven",
    power: "Allows the user to produce heat",
    description: "User can generate extreme heat from their body."
  },
  "Kuku Kuku no Mi": {
    id: "kuku_kuku_no_mi",
    name: "Kuku Kuku no Mi",
    type: "Paramecia",
    rarity: "epic",
    user: "Streusen",
    power: "Allows the user to turn anything into food",
    description: "User can transform any inorganic material into edible food."
  },
  "Gocha Gocha no Mi": {
    id: "gocha_gocha_no_mi",
    name: "Gocha Gocha no Mi",
    type: "Paramecia",
    rarity: "epic",
    user: "Charlotte Newshi",
    power: "Allows the user to merge with anything",
    description: "User can merge and fuse with any object or material."
  },
  "Oshi Oshi no Mi": {
    id: "oshi_oshi_no_mi",
    name: "Oshi Oshi no Mi",
    type: "Paramecia",
    rarity: "epic",
    user: "Morley",
    power: "Allows the user to push and reshape earth",
    description: "User can push and mold the ground like clay."
  },
  "Nikyu Nikyu no Mi, Awakened": {
    id: "nikyu_nikyu_no_mi_awakened",
    name: "Nikyu Nikyu no Mi, Awakened",
    type: "Paramecia",
    rarity: "epic",
    user: "Bartholomew Kuma",
    power: "Advanced paw pad abilities",
    description: "Awakened form allows user to repel abstract concepts like pain and memories."
  },

  // =====================================================
  // LEGENDARY FRUITS (15 fruits)
  // =====================================================
  "Hito Hito no Mi, Model: Nika": {
    id: "hito_hito_no_mi_nika",
    name: "Hito Hito no Mi, Model: Nika",
    type: "Mythical Zoan",
    rarity: "legendary",
    user: "Monkey D. Luffy",
    power: "Sun God Nika - grants rubber powers and reality manipulation",
    description: "Mythical Zoan of the Sun God Nika, bringing joy and liberation to all."
  },
  "Tori Tori no Mi, Model: Phoenix": {
    id: "tori_tori_no_mi_phoenix",
    name: "Tori Tori no Mi, Model: Phoenix",
    type: "Mythical Zoan",
    rarity: "legendary",
    user: "Marco",
    power: "Transforms the user into a phoenix with regeneration",
    description: "User can transform into a phoenix and regenerate from any injury."
  },
  "Uo Uo no Mi, Model: Seiryu": {
    id: "uo_uo_no_mi_seiryu",
    name: "Uo Uo no Mi, Model: Seiryu",
    type: "Mythical Zoan",
    rarity: "legendary",
    user: "Kaido",
    power: "Transforms the user into an Azure Dragon",
    description: "User can transform into a massive Azure Dragon with weather control."
  },
  "Hito Hito no Mi, Model: Daibutsu": {
    id: "hito_hito_no_mi_daibutsu",
    name: "Hito Hito no Mi, Model: Daibutsu",
    type: "Mythical Zoan",
    rarity: "legendary",
    user: "Sengoku",
    power: "Transforms the user into a giant golden Buddha",
    description: "User can transform into a giant golden Buddha with shockwave attacks."
  },
  "Hebi Hebi no Mi, Model: Yamata-no-Orochi": {
    id: "hebi_hebi_no_mi_yamata_orochi",
    name: "Hebi Hebi no Mi, Model: Yamata-no-Orochi",
    type: "Mythical Zoan",
    rarity: "legendary",
    user: "Kurozumi Orochi",
    power: "Transforms the user into the eight-headed serpent",
    description: "User can transform into the legendary eight-headed, eight-tailed serpent."
  },
  "Inu Inu no Mi, Model: Okuchi no Makami": {
    id: "inu_inu_no_mi_okuchi_makami",
    name: "Inu Inu no Mi, Model: Okuchi no Makami",
    type: "Mythical Zoan",
    rarity: "legendary",
    user: "Yamato",
    power: "Transforms the user into the Wolf God",
    description: "User can transform into the sacred wolf god with ice powers."
  },
  "Toki Toki no Mi": {
    id: "toki_toki_no_mi",
    name: "Toki Toki no Mi",
    type: "Paramecia",
    rarity: "legendary",
    user: "Kozuki Toki",
    power: "Allows the user to travel through time",
    description: "User can send themselves or others forward in time."
  },
  "Yami Yami no Mi, Awakened": {
    id: "yami_yami_no_mi_awakened",
    name: "Yami Yami no Mi, Awakened",
    type: "Logia",
    rarity: "legendary",
    user: "Marshall D. Teach",
    power: "Advanced darkness manipulation",
    description: "Awakened form allows user to absorb and nullify Devil Fruit powers permanently."
  },
  "Gura Gura no Mi, Awakened": {
    id: "gura_gura_no_mi_awakened",
    name: "Gura Gura no Mi, Awakened",
    type: "Paramecia",
    rarity: "legendary",
    user: "Marshall D. Teach",
    power: "Advanced earthquake manipulation",
    description: "Awakened form can crack the very fabric of space and reality."
  },
  "Ope Ope no Mi, Ultimate": {
    id: "ope_ope_no_mi_ultimate",
    name: "Ope Ope no Mi, Ultimate",
    type: "Paramecia",
    rarity: "legendary",
    user: "Trafalgar D. Water Law",
    power: "Ultimate surgical technique - Perennial Youth Surgery",
    description: "Can grant eternal youth at the cost of the user's life."
  },

  // =====================================================
  // MYTHICAL FRUITS (10 fruits)
  // =====================================================
  "Hito Hito no Mi, Model: Nika, Awakened": {
    id: "hito_hito_no_mi_nika_awakened",
    name: "Hito Hito no Mi, Model: Nika, Awakened",
    type: "Mythical Zoan",
    rarity: "mythical",
    user: "Monkey D. Luffy",
    power: "Awakened Sun God with cartoon physics",
    description: "Gear 5 - Sun God Nika's awakened form with reality-bending powers."
  },
  "Yami Yami no Mi + Gura Gura no Mi": {
    id: "dual_yami_gura",
    name: "Yami Yami no Mi + Gura Gura no Mi",
    type: "Dual Fruit",
    rarity: "mythical",
    user: "Marshall D. Teach",
    power: "Darkness and earthquake powers combined",
    description: "Unprecedented dual Devil Fruit powers of darkness and world-destruction."
  },
  "Soru Soru no Mi, Awakened": {
    id: "soru_soru_no_mi_awakened",
    name: "Soru Soru no Mi, Awakened",
    type: "Paramecia",
    rarity: "mythical",
    user: "Charlotte Linlin",
    power: "Advanced soul manipulation",
    description: "Awakened form allows mass soul extraction and homie creation."
  },
  "Magu Magu no Mi, Awakened": {
    id: "magu_magu_no_mi_awakened",
    name: "Magu Magu no Mi, Awakened",
    type: "Logia",
    rarity: "mythical",
    user: "Sakazuki",
    power: "Advanced magma manipulation",
    description: "Awakened form can turn entire islands into volcanic wastelands."
  },
  "Pika Pika no Mi, Awakened": {
    id: "pika_pika_no_mi_awakened",
    name: "Pika Pika no Mi, Awakened",
    type: "Logia",
    rarity: "mythical",
    user: "Borsalino",
    power: "Advanced light manipulation",
    description: "Awakened form allows manipulation of light across vast distances."
  },
  "Goro Goro no Mi, Awakened": {
    id: "goro_goro_no_mi_awakened",
    name: "Goro Goro no Mi, Awakened",
    type: "Logia",
    rarity: "mythical",
    user: "Enel",
    power: "Advanced lightning manipulation",
    description: "Awakened form grants god-like control over all electrical phenomena."
  },
  "Hobi Hobi no Mi, Awakened": {
    id: "hobi_hobi_no_mi_awakened",
    name: "Hobi Hobi no Mi, Awakened",
    type: "Paramecia",
    rarity: "mythical",
    user: "Sugar",
    power: "Advanced toy transformation",
    description: "Awakened form can transform entire populations into toys."
  },

  // =====================================================
  // OMNIPOTENT FRUITS (5 fruits)
  // =====================================================
  "Hito Hito no Mi, Model: Nika, Perfect": {
    id: "hito_hito_no_mi_nika_perfect",
    name: "Hito Hito no Mi, Model: Nika, Perfect",
    type: "Divine Zoan",
    rarity: "omnipotent",
    user: "Joy Boy",
    power: "Perfect Sun God form with ultimate liberation",
    description: "The perfect manifestation of the Sun God Nika's divine power."
  },
  "Im-sama's Power": {
    id: "im_sama_power",
    name: "Im-sama's Power",
    type: "World Sovereign",
    rarity: "omnipotent",
    user: "Im",
    power: "Sovereign control over the entire world",
    description: "The ultimate power that rules over all existence in the world."
  },
  "Joy Boy's Will": {
    id: "joy_boy_will",
    name: "Joy Boy's Will",
    type: "Ancient Will",
    rarity: "omnipotent",
    user: "Joy Boy",
    power: "The drums of liberation that free all from oppression",
    description: "The ancient will that brings liberation to all who are oppressed."
  },
  "One Piece": {
    id: "one_piece",
    name: "One Piece",
    type: "Legendary Treasure",
    rarity: "omnipotent",
    user: "Gol D. Roger",
    power: "The ultimate treasure that makes dreams reality",
    description: "The legendary treasure that contains the power to make any dream come true."
  },
  "Void Century Weapon": {
    id: "void_century_weapon",
    name: "Void Century Weapon",
    type: "Ancient Weapon",
    rarity: "omnipotent",
    user: "Unknown",
    power: "The power that ended the Void Century",
    description: "An ancient weapon of mass destruction that can end civilizations."
  }
};

// Rarity rates for gacha system
const RARITY_RATES = {
  common: 0.40,      // 40%
  uncommon: 0.30,    // 30%
  rare: 0.20,        // 20%
  epic: 0.07,        // 7%
  legendary: 0.025,  // 2.5%
  mythical: 0.004,   // 0.4%
  omnipotent: 0.001  // 0.1%
};

// Rarity colors for embeds
const RARITY_COLORS = {
  common: 0x8B4513,     // Brown
  uncommon: 0x00FF00,   // Green
  rare: 0x0080FF,       // Blue
  epic: 0x8000FF,       // Purple
  legendary: 0xFFD700,  // Gold
  mythical: 0xFF8000,   // Orange
  omnipotent: 0xFF0000  // Red
};

// Rarity emojis
const RARITY_EMOJIS = {
  common: '🟫',
  uncommon: '🟩',
  rare: '🟦',
  epic: '🟪',
  legendary: '🟨',
  mythical: '🟧',
  omnipotent: '🌈'
};

// Utility functions
function getRandomFruit() {
  // Calculate total weight
  const totalWeight = Object.values(RARITY_RATES).reduce((sum, rate) => sum + rate, 0);
  
  // Generate random number
  let random = Math.random() * totalWeight;
  
  // Find rarity based on weight
  for (const [rarity, rate] of Object.entries(RARITY_RATES)) {
    random -= rate;
    if (random <= 0) {
      // Get fruits of this rarity
      const fruitsOfRarity = Object.values(DEVIL_FRUITS).filter(fruit => fruit.rarity === rarity);
      
      if (fruitsOfRarity.length === 0) {
        // Fallback to common if no fruits found
        const commonFruitsList = Object.values(DEVIL_FRUITS).filter(fruit => fruit.rarity === 'common');
        return commonFruitsList[Math.floor(Math.random() * commonFruitsList.length)];
      }
      
      // Return random fruit of this rarity
      return fruitsOfRarity[Math.floor(Math.random() * fruitsOfRarity.length)];
    }
  }
  
  // Fallback to first fruit if something goes wrong
  return Object.values(DEVIL_FRUITS)[0];
}

function getFruitById(id) {
  return Object.values(DEVIL_FRUITS).find(fruit => fruit.id === id) || null;
}

function getFruitByName(name) {
  return DEVIL_FRUITS[name] || null;
}

function getFruitsByRarity(rarity) {
  return Object.values(DEVIL_FRUITS).filter(fruit => fruit.rarity === rarity);
}

function getAllFruits() {
  return Object.values(DEVIL_FRUITS);
}

function getRarityColor(rarity) {
  return RARITY_COLORS[rarity] || 0x8B4513;
}

function getRarityEmoji(rarity) {
  return RARITY_EMOJIS[rarity] || '🟫';
}

function getStats() {
  const total = Object.keys(DEVIL_FRUITS).length;
  const byRarity = {};
  
  Object.values(DEVIL_FRUITS).forEach(fruit => {
    byRarity[fruit.rarity] = (byRarity[fruit.rarity] || 0) + 1;
  });
  
  return {
    total,
    byRarity,
    rarities: Object.keys(RARITY_RATES)
  };
}

function validateFruits() {
  const errors = [];
  
  // Check if we have fruits for each rarity
  for (const rarity of Object.keys(RARITY_RATES)) {
    const fruitsOfRarity = getFruitsByRarity(rarity);
    if (fruitsOfRarity.length === 0) {
      errors.push(`No fruits found for rarity: ${rarity}`);
    }
  }
  
  // Check for missing required fields
  Object.entries(DEVIL_FRUITS).forEach(([name, fruit]) => {
    if (!fruit.name) errors.push(`Missing name for fruit: ${name}`);
    if (!fruit.type) errors.push(`Missing type for fruit: ${name}`);
    if (!fruit.power) errors.push(`Missing power for fruit: ${name}`);
    if (!fruit.rarity) errors.push(`Missing rarity for fruit: ${name}`);
  });
  
  return {
    isValid: errors.length === 0,
    errors,
    totalFruits: Object.keys(DEVIL_FRUITS).length
  };
}

function searchFruits(query) {
  const searchTerm = query.toLowerCase();
  return Object.values(DEVIL_FRUITS).filter(fruit => 
    fruit.name.toLowerCase().includes(searchTerm) ||
    fruit.type.toLowerCase().includes(searchTerm) ||
    fruit.power.toLowerCase().includes(searchTerm) ||
    fruit.user.toLowerCase().includes(searchTerm) ||
    fruit.rarity.toLowerCase().includes(searchTerm)
  );
}

function getFruitsByType(type) {
  return Object.values(DEVIL_FRUITS).filter(fruit => fruit.type === type);
}

function getFruitsByUser(user) {
  return Object.values(DEVIL_FRUITS).filter(fruit => 
    fruit.user.toLowerCase().includes(user.toLowerCase())
  );
}

function getCanonicalFruitCount() {
  return {
    total: Object.keys(DEVIL_FRUITS).length,
    paramecia: getFruitsByType('Paramecia').length,
    logia: getFruitsByType('Logia').length,
    zoan: getFruitsByType('Zoan').length,
    ancientZoan: getFruitsByType('Ancient Zoan').length,
    mythicalZoan: getFruitsByType('Mythical Zoan').length,
    specialParamecia: getFruitsByType('Special Paramecia').length,
    divineZoan: getFruitsByType('Divine Zoan').length,
    dualFruit: getFruitsByType('Dual Fruit').length,
    worldSovereign: getFruitsByType('World Sovereign').length,
    ancientWill: getFruitsByType('Ancient Will').length,
    legendaryTreasure: getFruitsByType('Legendary Treasure').length,
    ancientWeapon: getFruitsByType('Ancient Weapon').length
  };
}

// Element counters (legacy support)
const ELEMENT_COUNTERS = {
  'Fire': ['Ice', 'Water'],
  'Ice': ['Fire'],
  'Water': ['Fire'],
  'Lightning': ['Water'],
  'Earth': ['Lightning'],
  'Wind': ['Earth'],
  'Light': ['Darkness'],
  'Darkness': ['Light'],
  'Magma': ['Ice', 'Water'],
  'Sand': ['Water'],
  'Smoke': ['Wind'],
  'Snow': ['Fire'],
  'Gas': ['Wind'],
  'Swamp': ['Fire'],
  'Poison': ['Medicine'],
  'Gravity': ['Light'],
  'Time': ['Space'],
  'Space': ['Time'],
  'Soul': ['Will'],
  'Memory': ['Forgetfulness'],
  'Mirror': ['Darkness'],
  'String': ['Blade'],
  'Barrier': ['Penetration'],
  'Tremor': ['Stability'],
  'Rubber': ['Blade'],
  'Separation': ['Unity'],
  'Toy': ['Memory'],
  'Hobby': ['Seriousness'],
  'Liberation': ['Oppression'],
  'Sun God': ['All'],
  'World Control': ['All'],
  'Ultimate Dream': ['All']
};

module.exports = {
  DEVIL_FRUITS,
  RARITY_RATES,
  RARITY_COLORS,
  RARITY_EMOJIS,
  ELEMENT_COUNTERS,
  getRandomFruit,
  getFruitById,
  getFruitByName,
  getFruitsByRarity,
  getAllFruits,
  getRarityColor,
  getRarityEmoji,
  getStats,
  validateFruits,
  searchFruits,
  getFruitsByType,
  getFruitsByUser,
  getCanonicalFruitCount
};// src/data/fruits.js - Main Devil Fruits Database (149 Canonical Fruits)

const DEVIL_FRUITS = {
  // =====================================================
  // COMMON FRUITS (24 fruits)
  // =====================================================
  "Gomu Gomu no Mi": {
    id: "gomu_gomu_no_mi",
    name: "Gomu Gomu no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Monkey D. Luffy",
    power: "Grants rubber properties to the user's body",
    description: "Allows the user to stretch their body like rubber, becoming immune to blunt attacks and electricity."
  },
  "Bara Bara no Mi": {
    id: "bara_bara_no_mi",
    name: "Bara Bara no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Buggy",
    power: "Allows the user to split their body into pieces",
    description: "User can separate their body parts and control them independently, immune to slashing attacks."
  },
  "Sube Sube no Mi": {
    id: "sube_sube_no_mi",
    name: "Sube Sube no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Alvida",
    power: "Makes the user's skin slippery",
    description: "Everything slides off the user's smooth skin, including physical attacks."
  },
  "Bomu Bomu no Mi": {
    id: "bomu_bomu_no_mi",
    name: "Bomu Bomu no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Mr. 5",
    power: "Makes the user a bomb human",
    description: "User can make any part of their body explode, including their breath and bodily secretions."
  },
  "Kilo Kilo no Mi": {
    id: "kilo_kilo_no_mi",
    name: "Kilo Kilo no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Miss Valentine",
    power: "Allows the user to change their weight",
    description: "User can alter their weight from 1 kg to 10,000 kg at will."
  },
  "Doru Doru no Mi": {
    id: "doru_doru_no_mi",
    name: "Doru Doru no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Mr. 3",
    power: "Allows the user to create and control wax",
    description: "User can produce candle wax from their body that hardens to steel-like strength."
  },
  "Bane Bane no Mi": {
    id: "bane_bane_no_mi",
    name: "Bane Bane no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Bellamy",
    power: "Turns the user's legs into springs",
    description: "User's legs become springs, allowing for powerful jumping and bouncing attacks."
  },
  "Supa Supa no Mi": {
    id: "supa_supa_no_mi",
    name: "Supa Supa no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Daz Bonez",
    power: "Turns the user's body into blades",
    description: "User can turn any part of their body into steel blades."
  },
  "Toge Toge no Mi": {
    id: "toge_toge_no_mi",
    name: "Toge Toge no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Miss Doublefinger",
    power: "Allows the user to grow spikes from their body",
    description: "User can grow spikes from any part of their body for offense and defense."
  },
  "Ori Ori no Mi": {
    id: "ori_ori_no_mi",
    name: "Ori Ori no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Hina",
    power: "Allows the user to bind opponents with iron",
    description: "User can create iron shackles and cages to restrain enemies."
  },
  "Baku Baku no Mi": {
    id: "baku_baku_no_mi",
    name: "Baku Baku no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Wapol",
    power: "Allows the user to eat anything",
    description: "User can consume anything and either transform into it or combine eaten objects."
  },
  "Mane Mane no Mi": {
    id: "mane_mane_no_mi",
    name: "Mane Mane no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Bon Clay",
    power: "Allows the user to copy appearances",
    description: "User can transform into anyone they've touched with their right hand."
  },
  "Hana Hana no Mi": {
    id: "hana_hana_no_mi",
    name: "Hana Hana no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Nico Robin",
    power: "Allows the user to sprout body parts anywhere",
    description: "User can sprout copies of their body parts from any surface."
  },
  "Shari Shari no Mi": {
    id: "shari_shari_no_mi",
    name: "Shari Shari no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Sharinguru",
    power: "Turns the user's limbs into wheels",
    description: "User can transform their limbs into spinning wheels for movement and attacks."
  },
  "Beri Beri no Mi": {
    id: "beri_beri_no_mi",
    name: "Beri Beri no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Very Good",
    power: "Allows the user to turn into berries",
    description: "User can split their body into small berry-like orbs."
  },
  "Sabi Sabi no Mi": {
    id: "sabi_sabi_no_mi",
    name: "Sabi Sabi no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Shu",
    power: "Allows the user to rust metal",
    description: "User can rust and corrode any metal they touch."
  },
  "Shabon Shabon no Mi": {
    id: "shabon_shabon_no_mi",
    name: "Shabon Shabon no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Kalifa",
    power: "Allows the user to create soap bubbles",
    description: "User can create soap bubbles that clean away enemy strength."
  },
  "Awa Awa no Mi": {
    id: "awa_awa_no_mi",
    name: "Awa Awa no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Kalifa",
    power: "Allows the user to create and control bubbles",
    description: "User can generate soap bubbles that weaken enemies."
  },
  "Goe Goe no Mi": {
    id: "goe_goe_no_mi",
    name: "Goe Goe no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "El Drago",
    power: "Allows the user to create powerful sound waves",
    description: "User can produce destructive sound waves from their voice."
  },
  "Hiso Hiso no Mi": {
    id: "hiso_hiso_no_mi",
    name: "Hiso Hiso no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Apis",
    power: "Allows the user to communicate with animals",
    description: "User can hear the voices of animals and communicate with them."
  },
  "Kama Kama no Mi": {
    id: "kama_kama_no_mi",
    name: "Kama Kama no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Eric",
    power: "Allows the user to create wind slashes",
    description: "User can create cutting wind attacks with their fingernails."
  },
  "Kachi Kachi no Mi": {
    id: "kachi_kachi_no_mi",
    name: "Kachi Kachi no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Bear King",
    power: "Makes the user's body extremely hard and hot",
    description: "User's body becomes incredibly hard and generates intense heat."
  },
  "Nemu Nemu no Mi": {
    id: "nemu_nemu_no_mi",
    name: "Nemu Nemu no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Noko",
    power: "Allows the user to induce sleep",
    description: "User can release spores that cause drowsiness and sleep."
  },
  "Mini Mini no Mi": {
    id: "mini_mini_no_mi",
    name: "Mini Mini no Mi",
    type: "Paramecia",
    rarity: "common",
    user: "Blyue",
    power: "Allows the user to shrink",
    description: "User can shrink their body to become very small."
  },

  // =====================================================
  // UNCOMMON FRUITS (35 fruits)
  // =====================================================
  "Horo Horo no Mi": {
    id: "horo_horo_no_mi",
    name: "Horo Horo no Mi",
    type: "Paramecia",
    rarity: "uncommon",
    user: "Perona",
    power: "Allows the user to create and control ghosts",
    description: "User can create ghosts that drain enemies' willpower and make them extremely negative."
  },
  "Suke Suke no Mi": {
    id: "suke_suke_no_mi",
    name: "Suke Suke no Mi",
    type: "Paramecia",
    rarity: "uncommon",
    user: "Absalom",
    power: "Grants the user invisibility",
    description: "User can become invisible and make anything they touch invisible as well."
  },
  "Nikyu Nikyu no Mi": {
    id: "nikyu_nikyu_no_mi",
    name: "Nikyu Nikyu no Mi",
    type: "Paramecia",
    rarity: "uncommon",
    user: "Bartholomew Kuma",
    power: "Grants paw pads that can repel anything",
    description: "User has paw pads that can repel anything, including damage, fatigue, and even air."
  },
  "Mero Mero no Mi": {
    id: "mero_mero_no_mi",
    name: "Mero Mero no Mi",
    type: "Paramecia",
    rarity: "uncommon",
    user: "Boa Hancock",
    power: "Allows the user to turn people to stone with love",
    description: "User can petrify anyone who feels attraction or lust toward them."
  },
  "Doa Doa no Mi": {
    id: "doa_doa_no_mi",
    name: "Doa Doa no Mi",
    type: "Paramecia",
    rarity: "uncommon",
    user: "Blueno",
    power: "Allows the user to create doors anywhere",
    description: "User can create doors on any surface, including the air itself."
  },
  "Kage Kage no Mi": {
    id: "kage_kage_no_mi",
    name: "Kage Kage no Mi",
    type: "Paramecia",
    rarity: "uncommon",
    user: "Gecko Moria",
    power: "Allows the user to control shadows",
    description: "User can manipulate shadows, steal them, and create shadow zombies."
  },
  "Horu Horu no Mi": {
    id: "horu_horu_no_mi",
    name: "Horu Horu no Mi",
    type: "Paramecia",
    rarity: "uncommon",
    user: "Emporio Ivankov",
    power: "Allows the user to control hormones",
    description: "User can inject hormones to heal, enhance abilities, or change gender."
  },
  "Choki Choki no Mi": {
    id: "choki_choki_no_mi",
    name: "Choki Choki no Mi",
    type: "Paramecia",
    rarity: "uncommon",
    user: "Inazuma",
    power: "Allows the user to cut through anything like paper",
    description: "User can turn their hands into scissors and cut through any material."
  },
  "Yomi Yomi no Mi": {
    id: "yomi_yomi_no_mi",
    name: "Yomi Yomi no Mi",
    type: "Paramecia",
    rarity: "uncommon",
    user: "Brook",
    power: "Grants the user a second life",
    description: "User's soul returns to their body after death, and they can use soul-based abilities."
  },

  // Zoan Fruits (Uncommon)
  "Kuma Kuma no Mi": {
    id: "kuma_kuma_no_mi",
    name: "Kuma Kuma no Mi",
    type: "Zoan",
    rarity: "uncommon",
    user: "Unknown",
    power: "Transforms the user into a bear",
    description: "User can transform into a bear or bear-human hybrid."
  },
  "Ushi Ushi no Mi, Model: Bison": {
    id: "ushi_ushi_no_mi_bison",
    name: "Ushi Ushi no Mi, Model: Bison",
    type: "Zoan",
    rarity: "uncommon",
    user: "Dalton",
    power: "Transforms the user into a bison",
    description: "User can transform into a bison or bison-human hybrid."
  },
  "Hito Hito no Mi": {
    id: "hito_hito_no_mi",
    name: "Hito Hito no Mi",
    type: "Zoan",
    rarity: "uncommon",
    user: "Tony Tony Chopper",
    power: "Transforms the user into a human",
    description: "Grants human intelligence and the ability to transform into human form."
  },
  "Tori Tori no Mi, Model: Falcon": {
    id: "tori_tori_no_mi_falcon",
    name: "Tori Tori no Mi, Model: Falcon",
    type: "Zoan",
    rarity: "uncommon",
    user: "Pell",
    power: "Transforms the user into a falcon",
    description: "User can transform into a falcon or falcon-human hybrid."
  },
  "Mogu Mogu no Mi": {
    id: "mogu_mogu_no_mi",
    name: "Mogu Mogu no Mi",
    type: "Zoan",
    rarity: "uncommon",
    user: "Miss Merry Christmas",
    power: "Transforms the user into a mole",
    description: "User can transform into a mole or mole-human hybrid."
  },
  "Inu Inu no Mi, Model: Dachshund": {
    id: "inu_inu_no_mi_dachshund",
    name: "Inu Inu no Mi, Model: Dachshund",
    type: "Zoan",
    rarity: "uncommon",
    user: "Lassoo",
    power: "Transforms the user into a dachshund",
    description: "User can transform into a dachshund or dachshund-human hybrid."
  },
  "Inu Inu no Mi, Model: Jackal": {
    id: "inu_inu_no_mi_jackal",
    name: "Inu Inu no Mi, Model: Jackal",
    type: "Zoan",
    rarity: "uncommon",
    user: "Chaka",
    power: "Transforms the user into a jackal",
    description: "User can transform into a jackal or jackal-human hybrid."
  },
  "Tori Tori no Mi, Model: Eagle": {
    id: "tori_tori_no_mi_eagle",
    name: "Tori Tori no Mi, Model: Eagle",
    type: "Zoan",
    rarity: "uncommon",
    user: "Unknown",
    power: "Transforms the user into an eagle",
    description: "User can transform into an eagle or eagle-human hybrid."
  },
  "Saru Saru no Mi": {
    id: "saru_saru_no_mi",
    name: "Saru Saru no Mi",
    type: "Zoan",
    rarity: "uncommon",
    user: "Unknown",
    power: "Transforms the user into a monkey",
    description: "User can transform into a monkey or monkey-human hybrid."
  },
  "Uma Uma no Mi": {
    id: "uma_uma_no_mi",
    name: "Uma Uma no Mi",
    type: "Zoan",
    rarity: "uncommon",
    user: "Pierre",
    power: "Transforms the user into a horse",
    description: "User can transform into a horse or horse-human hybrid."
  },
  "Neko Neko no Mi, Model: Leopard": {
    id: "neko_neko_no_mi_leopard",
    name: "Neko Neko no Mi, Model: Leopard",
    type: "Zoan",
    rarity: "uncommon",
    user: "Rob Lucci",
    power: "Transforms the user into a leopard",
    description: "User can transform into a leopard or leopard-human hybrid."
  },
  "Zou Zou no Mi": {
    id: "zou_zou_no_mi",
    name: "Zou Zou no Mi",
    type: "Zoan",
    rarity: "uncommon",
    user: "Funkfreed",
    power: "Transforms the user into an elephant",
    description: "User can transform into an elephant or elephant-human hybrid."
  },
  "Inu Inu no Mi, Model: Wolf": {
    id: "inu_inu_no_mi_wolf",
    name: "Inu Inu no Mi, Model: Wolf",
    type: "Zoan",
    rarity: "uncommon",
    user: "Jabra",
    power: "Transforms the user into a wolf",
    description: "User can transform into a wolf or wolf-human hybrid."
  },
  "Neko Neko no Mi, Model: Saber Tiger": {
    id: "neko_neko_no_mi_saber_tiger",
    name: "Neko Neko no Mi, Model: Saber Tiger",
    type: "Zoan",
    rarity: "uncommon",
    user: "Who's-Who",
    power: "Transforms the user into a saber-toothed tiger",
    description: "User can transform into a saber-toothed tiger or saber tiger-human hybrid."
  },
  "Batto Batto no Mi, Model: Vampire": {
    id: "batto_batto_no_mi_vampire",
    name: "Batto Batto no Mi, Model: Vampire",
    type: "Zoan",
    rarity: "uncommon",
    user: "Patrick Redfield",
    power: "Transforms the user into a vampire bat",
    description: "User can transform into a vampire bat or vampire bat-human hybrid."
  },

  // Ancient Zoan Fruits
  "Kumo Kumo no Mi, Model: Rosamygale Grauvogeli": {
    id: "kumo_kumo_no_mi_rosamygale",
    name: "Kumo Kumo no Mi, Model: Rosamygale Grauvogeli",
    type: "Ancient Zoan",
    rarity: "uncommon",
    user: "Black Maria",
    power: "Transforms the user into an ancient spider",
    description: "User can transform into an ancient spider or spider-human hybrid."
  },
  "Ryu Ryu no Mi, Model: Spinosaurus": {
    id: "ryu_ryu_no_mi_spinosaurus",
    name: "Ryu Ryu no Mi, Model: Spinosaurus",
    type: "Ancient Zoan",
    rarity: "uncommon",
    user: "X Drake",
    power: "Transforms the user into a Spinosaurus",
    description: "User can transform into a Spinosaurus or Spinosaurus-human hybrid."
  },
  "Ryu Ryu no Mi, Model: Pteranodon": {
    id: "ryu_ryu_no_mi_pteranodon",
    name: "Ryu Ryu no Mi, Model: Pteranodon",
    type: "Ancient Zoan",
    rarity: "uncommon",
    user: "King",
    power: "Transforms the user into a Pteranodon",
    description: "User can transform into a Pteranodon or Pteranodon-human hybrid."
  },
  "Ryu Ryu no Mi, Model: Brachiosaurus": {
    id: "ryu_ryu_no_mi_brachiosaurus",
    name: "Ryu Ryu no Mi, Model: Brachiosaurus",
    type: "Ancient Zoan",
    rarity: "uncommon",
    user: "Queen",
    power: "Transforms the user into a Brachiosaurus",
    description: "User can transform into a Brachiosaurus or Brachiosaurus-human hybrid."
  },
  "Ryu Ryu no Mi, Model: Allosaurus": {
    id: "ryu_ryu_no_mi_allosaurus",
    name: "Ryu Ryu no Mi, Model: Allosaurus",
    type: "Ancient Zoan",
    rarity: "uncommon",
    user: "X Drake",
    power: "Transforms the user into an Allosaurus",
    description: "User can transform into an Allosaurus or Allosaurus-human hybrid."
  },
  "Ryu Ryu no Mi, Model: Triceratops": {
    id: "ryu_ryu_no_mi_triceratops",
    name: "Ryu Ryu no Mi, Model: Triceratops",
    type: "Ancient Zoan",
    rarity: "uncommon",
    user: "Sasaki",
    power: "Transforms the user into a Triceratops",
    description: "User can transform into a Triceratops or Triceratops-human hybrid."
  },
  "Zou Zou no Mi, Model: Mammoth": {
    id: "zou_zou_no_mi_mammoth",
    name: "Zou Zou no Mi, Model: Mammoth",
    type: "Ancient Zoan",
    rarity: "uncommon",
    user: "Jack",
    power: "Transforms the user into a mammoth",
    description: "User can transform into a mammoth or mammoth-human hybrid."
  },
  "Ryu Ryu no Mi, Model: Pachycephalosaurus": {
    id: "ryu_ryu_no_mi_pachycephalosaurus",
    name: "Ryu Ryu no Mi, Model: Pachycephalosaurus",
    type: "Ancient Zoan",
    rarity: "uncommon",
    user: "Ulti",
    power: "Transforms the user into a Pachycephalosaurus",
    description: "User can transform into a Pachycephalosaurus or Pachycephalosaurus-human hybrid."
  },
  "Neko Neko no Mi, Model: Smilodon": {
    id: "neko_neko_no_mi_smilodon",
    name: "Neko Neko no Mi, Model: Smilodon",
    type: "Ancient Zoan",
    rarity: "uncommon",
    user: "Unknown",
    power: "Transforms the user into a Smilodon",
    description: "User can transform into a Smilodon or S
